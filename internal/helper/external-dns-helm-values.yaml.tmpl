# Namespace is usually created outside Helm, but you can note it here
namespace: external-dns

# ------------------------------------------------------------------------------
# Image configuration
# ------------------------------------------------------------------------------
image:
  repository: registry.k8s.io/external-dns/external-dns
  tag: "{{ .imageVersion }}"
  pullPolicy: IfNotPresent

# ------------------------------------------------------------------------------
# Environment variable for TSIG secret (referencing a Kubernetes Secret)
# ------------------------------------------------------------------------------
extraEnv:
  - name: RFC2136_TSIG_SECRET
    valueFrom:
      secretKeyRef:
        name: {{ .secretName }}
        key: tsig-secret

# ------------------------------------------------------------------------------
# CLI arguments corresponding to your deployment spec
# ------------------------------------------------------------------------------
extraArgs:
  - --registry=txt
  - --txt-prefix={{ .txtPrefix }}
  - --txt-owner-id={{ .txtOwnerId }}
  - --provider=rfc2136
  - --rfc2136-host={{ .dnsServerAddress }}
  - --rfc2136-port={{ .dnsServerPort }}
  - --rfc2136-zone={{ .zone }}.
  - --rfc2136-tsig-secret-env=RFC2136_TSIG_SECRET
  - --rfc2136-tsig-secret-alg={{ .tsigAlgorithm }}
  - --rfc2136-tsig-keyname={{ .tsigKeyname }}
  - --rfc2136-tsig-axfr
  - --source=ingress
  - --domain-filter={{ .zone }}
