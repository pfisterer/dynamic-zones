var X,w,qa,Ul,W,Ra,Aa,Na,Oa,va,ma,ua,Ha,Q={},Ma=[],jl=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Z=Array.isArray;function U(l,a){for(var r in a)l[r]=a[r];return l}function ha(l){l&&l.parentNode&&l.parentNode.removeChild(l)}function ra(l,a,r){var e,t,i,n={};for(i in a)i=="key"?e=a[i]:i=="ref"?t=a[i]:n[i]=a[i];if(arguments.length>2&&(n.children=arguments.length>3?X.call(arguments,2):r),typeof l=="function"&&l.defaultProps!=null)for(i in l.defaultProps)n[i]===void 0&&(n[i]=l.defaultProps[i]);return Y(l,n,e,t,null)}function Y(l,a,r,e,t){var i={type:l,props:a,key:r,ref:e,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:t??++qa,__i:-1,__u:0};return t==null&&w.vnode!=null&&w.vnode(i),i}function zr(){return{current:null}}function ea(l){return l.children}function G(l,a){this.props=l,this.context=a}function K(l,a){if(a==null)return l.__?K(l.__,l.__i+1):null;for(var r;a<l.__k.length;a++)if((r=l.__k[a])!=null&&r.__e!=null)return r.__e;return typeof l.type=="function"?K(l):null}function Da(l){var a,r;if((l=l.__)!=null&&l.__c!=null){for(l.__e=l.__c.base=null,a=0;a<l.__k.length;a++)if((r=l.__k[a])!=null&&r.__e!=null){l.__e=l.__c.base=r.__e;break}return Da(l)}}function ba(l){(!l.__d&&(l.__d=!0)&&W.push(l)&&!la.__r++||Ra!=w.debounceRendering)&&((Ra=w.debounceRendering)||Aa)(la)}function la(){for(var l,a,r,e,t,i,n,s=1;W.length;)W.length>s&&W.sort(Na),l=W.shift(),s=W.length,l.__d&&(r=void 0,t=(e=(a=l).__v).__e,i=[],n=[],a.__P&&((r=U({},e)).__v=e.__v+1,w.vnode&&w.vnode(r),da(a.__P,r,e,a.__n,a.__P.namespaceURI,32&e.__u?[t]:null,i,t??K(e),!!(32&e.__u),n),r.__v=e.__v,r.__.__k[r.__i]=r,Fa(i,r,n),r.__e!=t&&Da(r)));la.__r=0}function $a(l,a,r,e,t,i,n,s,u,o,b){var m,c,v,k,_,f,g,h=e&&e.__k||Ma,z=a.length;for(u=ql(r,a,h,u,z),m=0;m<z;m++)(v=r.__k[m])!=null&&(c=v.__i==-1?Q:h[v.__i]||Q,v.__i=m,f=da(l,v,c,t,i,n,s,u,o,b),k=v.__e,v.ref&&c.ref!=v.ref&&(c.ref&&ga(c.ref,null,v),b.push(v.ref,v.__c||k,v)),_==null&&k!=null&&(_=k),(g=!!(4&v.__u))||c.__k===v.__k?u=Wa(v,u,l,g):typeof v.type=="function"&&f!==void 0?u=f:k&&(u=k.nextSibling),v.__u&=-7);return r.__e=_,u}function ql(l,a,r,e,t){var i,n,s,u,o,b=r.length,m=b,c=0;for(l.__k=new Array(t),i=0;i<t;i++)(n=a[i])!=null&&typeof n!="boolean"&&typeof n!="function"?(u=i+c,(n=l.__k[i]=typeof n=="string"||typeof n=="number"||typeof n=="bigint"||n.constructor==String?Y(null,n,null,null,null):Z(n)?Y(ea,{children:n},null,null,null):n.constructor==null&&n.__b>0?Y(n.type,n.props,n.key,n.ref?n.ref:null,n.__v):n).__=l,n.__b=l.__b+1,s=null,(o=n.__i=Nl(n,r,u,m))!=-1&&(m--,(s=r[o])&&(s.__u|=2)),s==null||s.__v==null?(o==-1&&(t>b?c--:t<b&&c++),typeof n.type!="function"&&(n.__u|=4)):o!=u&&(o==u-1?c--:o==u+1?c++:(o>u?c--:c++,n.__u|=4))):l.__k[i]=null;if(m)for(i=0;i<b;i++)(s=r[i])!=null&&(2&s.__u)==0&&(s.__e==e&&(e=K(s)),Ja(s,s));return e}function Wa(l,a,r,e){var t,i;if(typeof l.type=="function"){for(t=l.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=l,a=Wa(t[i],a,r,e));return a}l.__e!=a&&(e&&(a&&l.type&&!a.parentNode&&(a=K(l)),r.insertBefore(l.__e,a||null)),a=l.__e);do a=a&&a.nextSibling;while(a!=null&&a.nodeType==8);return a}function Al(l,a){return a=a||[],l==null||typeof l=="boolean"||(Z(l)?l.some(function(r){Al(r,a)}):a.push(l)),a}function Nl(l,a,r,e){var t,i,n,s=l.key,u=l.type,o=a[r],b=o!=null&&(2&o.__u)==0;if(o===null&&l.key==null||b&&s==o.key&&u==o.type)return r;if(e>(b?1:0)){for(t=r-1,i=r+1;t>=0||i<a.length;)if((o=a[n=t>=0?t--:i++])!=null&&(2&o.__u)==0&&s==o.key&&u==o.type)return n}return-1}function Ua(l,a,r){a[0]=="-"?l.setProperty(a,r??""):l[a]=r==null?"":typeof r!="number"||jl.test(a)?r:r+"px"}function aa(l,a,r,e,t){var i,n;a:if(a=="style")if(typeof r=="string")l.style.cssText=r;else{if(typeof e=="string"&&(l.style.cssText=e=""),e)for(a in e)r&&a in r||Ua(l.style,a,"");if(r)for(a in r)e&&r[a]==e[a]||Ua(l.style,a,r[a])}else if(a[0]=="o"&&a[1]=="n")i=a!=(a=a.replace(Oa,"$1")),n=a.toLowerCase(),a=n in l||a=="onFocusOut"||a=="onFocusIn"?n.slice(2):a.slice(2),l.l||(l.l={}),l.l[a+i]=r,r?e?r.u=e.u:(r.u=va,l.addEventListener(a,i?ua:ma,i)):l.removeEventListener(a,i?ua:ma,i);else{if(t=="http://www.w3.org/2000/svg")a=a.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(a!="width"&&a!="height"&&a!="href"&&a!="list"&&a!="form"&&a!="tabIndex"&&a!="download"&&a!="rowSpan"&&a!="colSpan"&&a!="role"&&a!="popover"&&a in l)try{l[a]=r??"";break a}catch{}typeof r=="function"||(r==null||r===!1&&a[4]!="-"?l.removeAttribute(a):l.setAttribute(a,a=="popover"&&r==1?"":r))}}function ja(l){return function(a){if(this.l){var r=this.l[a.type+l];if(a.t==null)a.t=va++;else if(a.t<r.u)return;return r(w.event?w.event(a):a)}}}function da(l,a,r,e,t,i,n,s,u,o){var b,m,c,v,k,_,f,g,h,z,E,T,x,R,P,S,M,I=a.type;if(a.constructor!=null)return null;128&r.__u&&(u=!!(32&r.__u),i=[s=a.__e=r.__e]),(b=w.__b)&&b(a);a:if(typeof I=="function")try{if(g=a.props,h="prototype"in I&&I.prototype.render,z=(b=I.contextType)&&e[b.__c],E=b?z?z.props.value:b.__:e,r.__c?f=(m=a.__c=r.__c).__=m.__E:(h?a.__c=m=new I(g,E):(a.__c=m=new G(g,E),m.constructor=I,m.render=Hl),z&&z.sub(m),m.props=g,m.state||(m.state={}),m.context=E,m.__n=e,c=m.__d=!0,m.__h=[],m._sb=[]),h&&m.__s==null&&(m.__s=m.state),h&&I.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=U({},m.__s)),U(m.__s,I.getDerivedStateFromProps(g,m.__s))),v=m.props,k=m.state,m.__v=a,c)h&&I.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),h&&m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(h&&I.getDerivedStateFromProps==null&&g!==v&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(g,E),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(g,m.__s,E)===!1||a.__v==r.__v){for(a.__v!=r.__v&&(m.props=g,m.state=m.__s,m.__d=!1),a.__e=r.__e,a.__k=r.__k,a.__k.some(function(D){D&&(D.__=a)}),T=0;T<m._sb.length;T++)m.__h.push(m._sb[T]);m._sb=[],m.__h.length&&n.push(m);break a}m.componentWillUpdate!=null&&m.componentWillUpdate(g,m.__s,E),h&&m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(v,k,_)})}if(m.context=E,m.props=g,m.__P=l,m.__e=!1,x=w.__r,R=0,h){for(m.state=m.__s,m.__d=!1,x&&x(a),b=m.render(m.props,m.state,m.context),P=0;P<m._sb.length;P++)m.__h.push(m._sb[P]);m._sb=[]}else do m.__d=!1,x&&x(a),b=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++R<25);m.state=m.__s,m.getChildContext!=null&&(e=U(U({},e),m.getChildContext())),h&&!c&&m.getSnapshotBeforeUpdate!=null&&(_=m.getSnapshotBeforeUpdate(v,k)),S=b,b!=null&&b.type===ea&&b.key==null&&(S=La(b.props.children)),s=$a(l,Z(S)?S:[S],a,r,e,t,i,n,s,u,o),m.base=a.__e,a.__u&=-161,m.__h.length&&n.push(m),f&&(m.__E=m.__=null)}catch(D){if(a.__v=null,u||i!=null)if(D.then){for(a.__u|=u?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;i[i.indexOf(s)]=null,a.__e=s}else{for(M=i.length;M--;)ha(i[M]);ca(a)}else a.__e=r.__e,a.__k=r.__k,D.then||ca(a);w.__e(D,a,r)}else i==null&&a.__v==r.__v?(a.__k=r.__k,a.__e=r.__e):s=a.__e=Ol(r.__e,a,r,e,t,i,n,u,o);return(b=w.diffed)&&b(a),128&a.__u?void 0:s}function ca(l){l&&l.__c&&(l.__c.__e=!0),l&&l.__k&&l.__k.forEach(ca)}function Fa(l,a,r){for(var e=0;e<r.length;e++)ga(r[e],r[++e],r[++e]);w.__c&&w.__c(a,l),l.some(function(t){try{l=t.__h,t.__h=[],l.some(function(i){i.call(t)})}catch(i){w.__e(i,t.__v)}})}function La(l){return typeof l!="object"||l==null||l.__b&&l.__b>0?l:Z(l)?l.map(La):U({},l)}function Ol(l,a,r,e,t,i,n,s,u){var o,b,m,c,v,k,_,f=r.props,g=a.props,h=a.type;if(h=="svg"?t="http://www.w3.org/2000/svg":h=="math"?t="http://www.w3.org/1998/Math/MathML":t||(t="http://www.w3.org/1999/xhtml"),i!=null){for(o=0;o<i.length;o++)if((v=i[o])&&"setAttribute"in v==!!h&&(h?v.localName==h:v.nodeType==3)){l=v,i[o]=null;break}}if(l==null){if(h==null)return document.createTextNode(g);l=document.createElementNS(t,h,g.is&&g),s&&(w.__m&&w.__m(a,i),s=!1),i=null}if(h==null)f===g||s&&l.data==g||(l.data=g);else{if(i=i&&X.call(l.childNodes),f=r.props||Q,!s&&i!=null)for(f={},o=0;o<l.attributes.length;o++)f[(v=l.attributes[o]).name]=v.value;for(o in f)if(v=f[o],o!="children"){if(o=="dangerouslySetInnerHTML")m=v;else if(!(o in g)){if(o=="value"&&"defaultValue"in g||o=="checked"&&"defaultChecked"in g)continue;aa(l,o,null,v,t)}}for(o in g)v=g[o],o=="children"?c=v:o=="dangerouslySetInnerHTML"?b=v:o=="value"?k=v:o=="checked"?_=v:s&&typeof v!="function"||f[o]===v||aa(l,o,v,f[o],t);if(b)s||m&&(b.__html==m.__html||b.__html==l.innerHTML)||(l.innerHTML=b.__html),a.__k=[];else if(m&&(l.innerHTML=""),$a(a.type=="template"?l.content:l,Z(c)?c:[c],a,r,e,h=="foreignObject"?"http://www.w3.org/1999/xhtml":t,i,n,i?i[0]:r.__k&&K(r,0),s,u),i!=null)for(o=i.length;o--;)ha(i[o]);s||(o="value",h=="progress"&&k==null?l.removeAttribute("value"):k!=null&&(k!==l[o]||h=="progress"&&!k||h=="option"&&k!=f[o])&&aa(l,o,k,f[o],t),o="checked",_!=null&&_!=l[o]&&aa(l,o,_,f[o],t))}return l}function ga(l,a,r){try{if(typeof l=="function"){var e=typeof l.__u=="function";e&&l.__u(),e&&a==null||(l.__u=l(a))}else l.current=a}catch(t){w.__e(t,r)}}function Ja(l,a,r){var e,t;if(w.unmount&&w.unmount(l),(e=l.ref)&&(e.current&&e.current!=l.__e||ga(e,null,a)),(e=l.__c)!=null){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(i){w.__e(i,a)}e.base=e.__P=null}if(e=l.__k)for(t=0;t<e.length;t++)e[t]&&Ja(e[t],a,r||typeof l.type!="function");r||ha(l.__e),l.__c=l.__=l.__e=void 0}function Hl(l,a,r){return this.constructor(l,r)}function Ka(l,a,r){var e,t,i,n;a==document&&(a=document.documentElement),w.__&&w.__(l,a),t=(e=typeof r=="function")?null:r&&r.__k||a.__k,i=[],n=[],da(a,l=(!e&&r||a).__k=ra(ea,null,[l]),t||Q,Q,a.namespaceURI,!e&&r?[r]:t?null:a.firstChild?X.call(a.childNodes):null,i,!e&&r?r:t?t.__e:a.firstChild,e,n),Fa(i,l,n)}function Ml(l,a){Ka(l,a,Ml)}function Er(l,a,r){var e,t,i,n,s=U({},l.props);for(i in l.type&&l.type.defaultProps&&(n=l.type.defaultProps),a)i=="key"?e=a[i]:i=="ref"?t=a[i]:s[i]=a[i]===void 0&&n!=null?n[i]:a[i];return arguments.length>2&&(s.children=arguments.length>3?X.call(arguments,2):r),Y(l.type,s,e||l.key,t||l.ref,null)}function Tr(l){function a(r){var e,t;return this.getChildContext||(e=new Set,(t={})[a.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){e=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&e.forEach(function(n){n.__e=!0,ba(n)})},this.sub=function(i){e.add(i);var n=i.componentWillUnmount;i.componentWillUnmount=function(){e&&e.delete(i),n&&n.call(i)}}),r.children}return a.__c="__cC"+Ha++,a.__=l,a.Provider=a.__l=(a.Consumer=function(r,e){return r.children(e)}).contextType=a,a}X=Ma.slice,w={__e:function(l,a,r,e){for(var t,i,n;a=a.__;)if((t=a.__c)&&!t.__)try{if((i=t.constructor)&&i.getDerivedStateFromError!=null&&(t.setState(i.getDerivedStateFromError(l)),n=t.__d),t.componentDidCatch!=null&&(t.componentDidCatch(l,e||{}),n=t.__d),n)return t.__E=t}catch(s){l=s}throw l}},qa=0,Ul=function(l){return l!=null&&l.constructor==null},G.prototype.setState=function(l,a){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=U({},this.state),typeof l=="function"&&(l=l(U({},r),this.props)),l&&U(r,l),l!=null&&this.__v&&(a&&this._sb.push(a),ba(this))},G.prototype.forceUpdate=function(l){this.__v&&(this.__e=!0,l&&this.__h.push(l),ba(this))},G.prototype.render=ea,W=[],Aa=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Na=function(l,a){return l.__v.__b-a.__v.__b},la.__r=0,Oa=/(PointerCapture)$|Capture$/i,va=0,ma=ja(!1),ua=ja(!0),Ha=0;var Va=function(l,a,r,e){var t;a[0]=0;for(var i=1;i<a.length;i++){var n=a[i++],s=a[i]?(a[0]|=n?1:2,r[a[i++]]):a[++i];n===3?e[0]=s:n===4?e[1]=Object.assign(e[1]||{},s):n===5?(e[1]=e[1]||{})[a[++i]]=s:n===6?e[1][a[++i]]+=s+"":n?(t=l.apply(s,Va(l,s,r,["",null])),e.push(t),s[0]?a[0]|=2:(a[i-2]=0,a[i]=t)):e.push(s)}return e},Ba=new Map;function Ya(l){var a=Ba.get(this);return a||(a=new Map,Ba.set(this,a)),(a=Va(this,a.get(l)||(a.set(l,a=(function(r){for(var e,t,i=1,n="",s="",u=[0],o=function(c){i===1&&(c||(n=n.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?u.push(0,c,n):i===3&&(c||n)?(u.push(3,c,n),i=2):i===2&&n==="..."&&c?u.push(4,c,0):i===2&&n&&!c?u.push(5,0,!0,n):i>=5&&((n||!c&&i===5)&&(u.push(i,0,n,t),i=6),c&&(u.push(i,c,0,t),i=6)),n=""},b=0;b<r.length;b++){b&&(i===1&&o(),o(b));for(var m=0;m<r[b].length;m++)e=r[b][m],i===1?e==="<"?(o(),u=[u],i=3):n+=e:i===4?n==="--"&&e===">"?(i=1,n=""):n=e+n[0]:s?e===s?s="":n+=e:e==='"'||e==="'"?s=e:e===">"?(o(),i=1):i&&(e==="="?(i=5,t=n,n=""):e==="/"&&(i<5||r[b][m+1]===">")?(o(),i===3&&(u=u[0]),i=u,(u=u[0]).push(2,0,i),i=0):e===" "||e==="	"||e===`
`||e==="\r"?(o(),i=2):n+=e),i===3&&n==="!--"&&(i=4,u=u[0])}return o(),u})(l)),a),arguments,[])).length>1?a:a[0]}var qr=Ya.bind(ra);var O,p,pa,Ga,B=0,tl=[],y=w,Qa=y.__b,Xa=y.__r,Za=y.diffed,al=y.__c,ll=y.unmount,rl=y.__;function F(l,a){y.__h&&y.__h(p,l,B||a),B=0;var r=p.__H||(p.__H={__:[],__h:[]});return l>=r.__.length&&r.__.push({}),r.__[l]}function Dl(l){return B=1,$l(nl,l)}function $l(l,a,r){var e=F(O++,2);if(e.t=l,!e.__c&&(e.__=[r?r(a):nl(void 0,a),function(s){var u=e.__N?e.__N[0]:e.__[0],o=e.t(u,s);u!==o&&(e.__N=[o,e.__[1]],e.__c.setState({}))}],e.__c=p,!p.__f)){var t=function(s,u,o){if(!e.__c.__H)return!0;var b=e.__c.__H.__.filter(function(c){return!!c.__c});if(b.every(function(c){return!c.__N}))return!i||i.call(this,s,u,o);var m=e.__c.props!==s;return b.forEach(function(c){if(c.__N){var v=c.__[0];c.__=c.__N,c.__N=void 0,v!==c.__[0]&&(m=!0)}}),i&&i.call(this,s,u,o)||m};p.__f=!0;var i=p.shouldComponentUpdate,n=p.componentWillUpdate;p.componentWillUpdate=function(s,u,o){if(this.__e){var b=i;i=void 0,t(s,u,o),i=b}n&&n.call(this,s,u,o)},p.shouldComponentUpdate=t}return e.__N||e.__}function Hr(l,a){var r=F(O++,3);!y.__s&&fa(r.__H,a)&&(r.__=l,r.u=a,p.__H.__h.push(r))}function Wl(l,a){var r=F(O++,4);!y.__s&&fa(r.__H,a)&&(r.__=l,r.u=a,p.__h.push(r))}function Mr(l){return B=5,il(function(){return{current:l}},[])}function Dr(l,a,r){B=6,Wl(function(){if(typeof l=="function"){var e=l(a());return function(){l(null),e&&typeof e=="function"&&e()}}if(l)return l.current=a(),function(){return l.current=null}},r==null?r:r.concat(l))}function il(l,a){var r=F(O++,7);return fa(r.__H,a)&&(r.__=l(),r.__H=a,r.__h=l),r.__}function $r(l,a){return B=8,il(function(){return l},a)}function Wr(l){var a=p.context[l.__c],r=F(O++,9);return r.c=l,a?(r.__==null&&(r.__=!0,a.sub(p)),a.props.value):l.__}function Fr(l,a){y.useDebugValue&&y.useDebugValue(a?a(l):l)}function Lr(l){var a=F(O++,10),r=Dl();return a.__=l,p.componentDidCatch||(p.componentDidCatch=function(e,t){a.__&&a.__(e,t),r[1](e)}),[r[0],function(){r[1](void 0)}]}function Jr(){var l=F(O++,11);if(!l.__){for(var a=p.__v;a!==null&&!a.__m&&a.__!==null;)a=a.__;var r=a.__m||(a.__m=[0,0]);l.__="P"+r[0]+"-"+r[1]++}return l.__}function Fl(){for(var l;l=tl.shift();)if(l.__P&&l.__H)try{l.__H.__h.forEach(ta),l.__H.__h.forEach(ka),l.__H.__h=[]}catch(a){l.__H.__h=[],y.__e(a,l.__v)}}y.__b=function(l){p=null,Qa&&Qa(l)},y.__=function(l,a){l&&a.__k&&a.__k.__m&&(l.__m=a.__k.__m),rl&&rl(l,a)},y.__r=function(l){Xa&&Xa(l),O=0;var a=(p=l.__c).__H;a&&(pa===p?(a.__h=[],p.__h=[],a.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(a.__h.forEach(ta),a.__h.forEach(ka),a.__h=[],O=0)),pa=p},y.diffed=function(l){Za&&Za(l);var a=l.__c;a&&a.__H&&(a.__H.__h.length&&(tl.push(a)!==1&&Ga===y.requestAnimationFrame||((Ga=y.requestAnimationFrame)||Ll)(Fl)),a.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),pa=p=null},y.__c=function(l,a){a.some(function(r){try{r.__h.forEach(ta),r.__h=r.__h.filter(function(e){return!e.__||ka(e)})}catch(e){a.some(function(t){t.__h&&(t.__h=[])}),a=[],y.__e(e,r.__v)}}),al&&al(l,a)},y.unmount=function(l){ll&&ll(l);var a,r=l.__c;r&&r.__H&&(r.__H.__.forEach(function(e){try{ta(e)}catch(t){a=t}}),r.__H=void 0,a&&y.__e(a,r.__v))};var el=typeof requestAnimationFrame=="function";function Ll(l){var a,r=function(){clearTimeout(e),el&&cancelAnimationFrame(a),setTimeout(l)},e=setTimeout(r,35);el&&(a=requestAnimationFrame(r))}function ta(l){var a=p,r=l.__c;typeof r=="function"&&(l.__c=void 0,r()),p=a}function ka(l){var a=p;l.__c=l.__(),p=a}function fa(l,a){return!l||l.length!==a.length||a.some(function(r,e){return r!==l[e]})}function nl(l,a){return typeof a=="function"?a(l):a}var L=class extends Error{};L.prototype.name="InvalidTokenError";function Jl(l){return decodeURIComponent(atob(l).replace(/(.)/g,(a,r)=>{let e=r.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e}))}function Kl(l){let a=l.replace(/-/g,"+").replace(/_/g,"/");switch(a.length%4){case 0:break;case 2:a+="==";break;case 3:a+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Jl(a)}catch{return atob(a)}}function sl(l,a){if(typeof l!="string")throw new L("Invalid token specified: must be a string");a||(a={});let r=a.header===!0?0:1,e=l.split(".")[r];if(typeof e!="string")throw new L(`Invalid token specified: missing part #${r+1}`);let t;try{t=Kl(e)}catch(i){throw new L(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(t)}catch(i){throw new L(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}var Bl={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},A,N,na=(l=>(l[l.NONE=0]="NONE",l[l.ERROR=1]="ERROR",l[l.WARN=2]="WARN",l[l.INFO=3]="INFO",l[l.DEBUG=4]="DEBUG",l))(na||{});(l=>{function a(){A=3,N=Bl}l.reset=a;function r(t){if(!(0<=t&&t<=4))throw new Error("Invalid log level");A=t}l.setLevel=r;function e(t){N=t}l.setLogger=e})(na||(na={}));var d=class j{constructor(a){this._name=a}debug(...a){A>=4&&N.debug(j._format(this._name,this._method),...a)}info(...a){A>=3&&N.info(j._format(this._name,this._method),...a)}warn(...a){A>=2&&N.warn(j._format(this._name,this._method),...a)}error(...a){A>=1&&N.error(j._format(this._name,this._method),...a)}throw(a){throw this.error(a),a}create(a){let r=Object.create(this);return r._method=a,r.debug("begin"),r}static createStatic(a,r){let e=new j(`${a}.${r}`);return e.debug("begin"),e}static _format(a,r){let e=`[${a}]`;return r?`${e} ${r}:`:e}static debug(a,...r){A>=4&&N.debug(j._format(a),...r)}static info(a,...r){A>=3&&N.info(j._format(a),...r)}static warn(a,...r){A>=2&&N.warn(j._format(a),...r)}static error(a,...r){A>=1&&N.error(j._format(a),...r)}};na.reset();var sa=class{static decode(l){try{return sl(l)}catch(a){throw d.error("JwtUtils.decode",a),a}}static async generateSignedJwt(l,a,r){let e=C.encodeBase64Url(new TextEncoder().encode(JSON.stringify(l))),t=C.encodeBase64Url(new TextEncoder().encode(JSON.stringify(a))),i=`${e}.${t}`,n=await window.crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},r,new TextEncoder().encode(i)),s=C.encodeBase64Url(new Uint8Array(n));return`${i}.${s}`}},Vl="10000000-1000-4000-8000-100000000000",ya=l=>btoa([...new Uint8Array(l)].map(a=>String.fromCharCode(a)).join("")),cl=class q{static _randomWord(){let a=new Uint32Array(1);return crypto.getRandomValues(a),a[0]}static generateUUIDv4(){return Vl.replace(/[018]/g,r=>(+r^q._randomWord()&15>>+r/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return q.generateUUIDv4()+q.generateUUIDv4()+q.generateUUIDv4()}static async generateCodeChallenge(a){if(!crypto.subtle)throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");try{let e=new TextEncoder().encode(a),t=await crypto.subtle.digest("SHA-256",e);return ya(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(r){throw d.error("CryptoUtils.generateCodeChallenge",r),r}}static generateBasicAuth(a,r){let t=new TextEncoder().encode([a,r].join(":"));return ya(t)}static async hash(a,r){let e=new TextEncoder().encode(r),t=await crypto.subtle.digest(a,e);return new Uint8Array(t)}static async customCalculateJwkThumbprint(a){let r;switch(a.kty){case"RSA":r={e:a.e,kty:a.kty,n:a.n};break;case"EC":r={crv:a.crv,kty:a.kty,x:a.x,y:a.y};break;case"OKP":r={crv:a.crv,kty:a.kty,x:a.x};break;case"oct":r={crv:a.k,kty:a.kty};break;default:throw new Error("Unknown jwk type")}let e=await q.hash("SHA-256",JSON.stringify(r));return q.encodeBase64Url(e)}static async generateDPoPProof({url:a,accessToken:r,httpMethod:e,keyPair:t,nonce:i}){let n,s,u={jti:window.crypto.randomUUID(),htm:e??"GET",htu:a,iat:Math.floor(Date.now()/1e3)};r&&(n=await q.hash("SHA-256",r),s=q.encodeBase64Url(n),u.ath=s),i&&(u.nonce=i);try{let o=await crypto.subtle.exportKey("jwk",t.publicKey),b={alg:"ES256",typ:"dpop+jwt",jwk:{crv:o.crv,kty:o.kty,x:o.x,y:o.y}};return await sa.generateSignedJwt(b,u,t.privateKey)}catch(o){throw o instanceof TypeError?new Error(`Error exporting dpop public key: ${o.message}`):o}}static async generateDPoPJkt(a){try{let r=await crypto.subtle.exportKey("jwk",a.publicKey);return await q.customCalculateJwkThumbprint(r)}catch(r){throw r instanceof TypeError?new Error(`Could not retrieve dpop keys from storage: ${r.message}`):r}}static async generateDPoPKeys(){return await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign","verify"])}};cl.encodeBase64Url=l=>ya(l).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var C=cl,$=class{constructor(l){this._name=l,this._callbacks=[],this._logger=new d(`Event('${this._name}')`)}addHandler(l){return this._callbacks.push(l),()=>this.removeHandler(l)}removeHandler(l){let a=this._callbacks.lastIndexOf(l);a>=0&&this._callbacks.splice(a,1)}async raise(...l){this._logger.debug("raise:",...l);for(let a of this._callbacks)await a(...l)}},ol=class{static center({...l}){var a,r,e;return l.width==null&&(l.width=(a=[800,720,600,480].find(t=>t<=window.outerWidth/1.618))!=null?a:360),(r=l.left)!=null||(l.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-l.width)/2))),l.height!=null&&((e=l.top)!=null||(l.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-l.height)/2)))),l}static serialize(l){return Object.entries(l).filter(([,a])=>a!=null).map(([a,r])=>`${a}=${typeof r!="boolean"?r:r?"yes":"no"}`).join(",")}},H=class ia extends ${constructor(){super(...arguments),this._logger=new d(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{let a=this._expiration-ia.getEpochTime();this._logger.debug("timer completes in",a),this._expiration<=ia.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(a){let r=this._logger.create("init");a=Math.max(Math.floor(a),1);let e=ia.getEpochTime()+a;if(this.expiration===e&&this._timerHandle){r.debug("skipping since already initialized for expiration at",this.expiration);return}this.cancel(),r.debug("using duration",a),this._expiration=e;let t=Math.min(a,5);this._timerHandle=setInterval(this._callback,t*1e3)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},_a=class{static readParams(l,a="query"){if(!l)throw new TypeError("Invalid URL");let e=new URL(l,"http://127.0.0.1")[a==="fragment"?"hash":"search"];return new URLSearchParams(e.slice(1))}},V=";",J=class extends Error{constructor(l,a){var r,e,t;if(super(l.error_description||l.error||""),this.form=a,this.name="ErrorResponse",!l.error)throw d.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=l.error,this.error_description=(r=l.error_description)!=null?r:null,this.error_uri=(e=l.error_uri)!=null?e:null,this.state=l.userState,this.session_state=(t=l.session_state)!=null?t:null,this.url_state=l.url_state}},Pa=class extends Error{constructor(l){super(l),this.name="ErrorTimeout"}},Yl=class{constructor(l){this._logger=new d("AccessTokenEvents"),this._expiringTimer=new H("Access token expiring"),this._expiredTimer=new H("Access token expired"),this._expiringNotificationTimeInSeconds=l.expiringNotificationTimeInSeconds}async load(l){let a=this._logger.create("load");if(l.access_token&&l.expires_in!==void 0){let r=l.expires_in;if(a.debug("access token present, remaining duration:",r),r>0){let t=r-this._expiringNotificationTimeInSeconds;t<=0&&(t=1),a.debug("registering expiring timer, raising in",t,"seconds"),this._expiringTimer.init(t)}else a.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();let e=r+1;a.debug("registering expired timer, raising in",e,"seconds"),this._expiredTimer.init(e)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}async unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(l){return this._expiringTimer.addHandler(l)}removeAccessTokenExpiring(l){this._expiringTimer.removeHandler(l)}addAccessTokenExpired(l){return this._expiredTimer.addHandler(l)}removeAccessTokenExpired(l){this._expiredTimer.removeHandler(l)}},Gl=class{constructor(l,a,r,e,t){this._callback=l,this._client_id=a,this._intervalInSeconds=e,this._stopOnError=t,this._logger=new d("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=n=>{n.origin===this._frame_origin&&n.source===this._frame.contentWindow&&(n.data==="error"?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):n.data==="changed"?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(n.data+" message from check session op iframe"))};let i=new URL(r);this._frame_origin=i.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=i.href}load(){return new Promise(l=>{this._frame.onload=()=>{l()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(l){if(this._session_state===l)return;this._logger.create("start"),this.stop(),this._session_state=l;let a=()=>{!this._frame.contentWindow||!this._session_state||this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};a(),this._timer=setInterval(a,this._intervalInSeconds*1e3)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},vl=class{constructor(){this._logger=new d("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(l){return this._logger.create(`getItem('${l}')`),this._data[l]}setItem(l,a){this._logger.create(`setItem('${l}')`),this._data[l]=a}removeItem(l){this._logger.create(`removeItem('${l}')`),delete this._data[l]}get length(){return Object.getOwnPropertyNames(this._data).length}key(l){return Object.getOwnPropertyNames(this._data)[l]}},Sa=class extends Error{constructor(l,a){super(a),this.name="ErrorDPoPNonce",this.nonce=l}},Ca=class{constructor(l=[],a=null,r={}){this._jwtHandler=a,this._extraHeaders=r,this._logger=new d("JsonService"),this._contentTypes=[],this._contentTypes.push(...l,"application/json"),a&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(l,a={}){let{timeoutInSeconds:r,...e}=a;if(!r)return await fetch(l,e);let t=new AbortController,i=setTimeout(()=>t.abort(),r*1e3);try{return await fetch(l,{...a,signal:t.signal})}catch(n){throw n instanceof DOMException&&n.name==="AbortError"?new Pa("Network timed out"):n}finally{clearTimeout(i)}}async getJson(l,{token:a,credentials:r,timeoutInSeconds:e}={}){let t=this._logger.create("getJson"),i={Accept:this._contentTypes.join(", ")};a&&(t.debug("token passed, setting Authorization header"),i.Authorization="Bearer "+a),this._appendExtraHeaders(i);let n;try{t.debug("url:",l),n=await this.fetchWithTimeout(l,{method:"GET",headers:i,timeoutInSeconds:e,credentials:r})}catch(o){throw t.error("Network Error"),o}t.debug("HTTP response received, status",n.status);let s=n.headers.get("Content-Type");if(s&&!this._contentTypes.find(o=>s.startsWith(o))&&t.throw(new Error(`Invalid response Content-Type: ${s??"undefined"}, from URL: ${l}`)),n.ok&&this._jwtHandler&&s?.startsWith("application/jwt"))return await this._jwtHandler(await n.text());let u;try{u=await n.json()}catch(o){throw t.error("Error parsing JSON response",o),n.ok?o:new Error(`${n.statusText} (${n.status})`)}if(!n.ok)throw t.error("Error from server:",u),u.error?new J(u):new Error(`${n.statusText} (${n.status}): ${JSON.stringify(u)}`);return u}async postForm(l,{body:a,basicAuth:r,timeoutInSeconds:e,initCredentials:t,extraHeaders:i}){let n=this._logger.create("postForm"),s={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded",...i};r!==void 0&&(s.Authorization="Basic "+r),this._appendExtraHeaders(s);let u;try{n.debug("url:",l),u=await this.fetchWithTimeout(l,{method:"POST",headers:s,body:a,timeoutInSeconds:e,credentials:t})}catch(c){throw n.error("Network error"),c}n.debug("HTTP response received, status",u.status);let o=u.headers.get("Content-Type");if(o&&!this._contentTypes.find(c=>o.startsWith(c)))throw new Error(`Invalid response Content-Type: ${o??"undefined"}, from URL: ${l}`);let b=await u.text(),m={};if(b)try{m=JSON.parse(b)}catch(c){throw n.error("Error parsing JSON response",c),u.ok?c:new Error(`${u.statusText} (${u.status})`)}if(!u.ok){if(n.error("Error from server:",m),u.headers.has("dpop-nonce")){let c=u.headers.get("dpop-nonce");throw new Sa(c,`${JSON.stringify(m)}`)}throw m.error?new J(m,a):new Error(`${u.statusText} (${u.status}): ${JSON.stringify(m)}`)}return m}_appendExtraHeaders(l){let a=this._logger.create("appendExtraHeaders"),r=Object.keys(this._extraHeaders),e=["accept","content-type"],t=["authorization"];r.length!==0&&r.forEach(i=>{if(e.includes(i.toLocaleLowerCase())){a.warn("Protected header could not be set",i,e);return}if(t.includes(i.toLocaleLowerCase())&&Object.keys(l).includes(i)){a.warn("Header could not be overridden",i,t);return}let n=typeof this._extraHeaders[i]=="function"?this._extraHeaders[i]():this._extraHeaders[i];n&&n!==""&&(l[i]=n)})}},Ql=class{constructor(l){this._settings=l,this._logger=new d("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new Ca(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){let l=this._logger.create("getMetadata");if(this._metadata)return l.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw l.throw(new Error("No authority or metadataUrl configured on settings")),null;l.debug("getting metadata from",this._metadataUrl);let a=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials,timeoutInSeconds:this._settings.requestTimeoutInSeconds});return l.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},a,this._settings.metadataSeed),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(l=!0){return this._getMetadataProperty("token_endpoint",l)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(l=!0){return this._getMetadataProperty("revocation_endpoint",l)}getKeysEndpoint(l=!0){return this._getMetadataProperty("jwks_uri",l)}async _getMetadataProperty(l,a=!1){let r=this._logger.create(`_getMetadataProperty('${l}')`),e=await this.getMetadata();if(r.debug("resolved"),e[l]===void 0){if(a===!0){r.warn("Metadata does not contain optional property");return}r.throw(new Error("Metadata does not contain property "+l))}return e[l]}async getSigningKeys(){let l=this._logger.create("getSigningKeys");if(this._signingKeys)return l.debug("returning signingKeys from cache"),this._signingKeys;let a=await this.getKeysEndpoint(!1);l.debug("got jwks_uri",a);let r=await this._jsonService.getJson(a,{timeoutInSeconds:this._settings.requestTimeoutInSeconds});if(l.debug("got key set",r),!Array.isArray(r.keys))throw l.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=r.keys,this._signingKeys}},hl=class{constructor({prefix:l="oidc.",store:a=localStorage}={}){this._logger=new d("WebStorageStateStore"),this._store=a,this._prefix=l}async set(l,a){this._logger.create(`set('${l}')`),l=this._prefix+l,await this._store.setItem(l,a)}async get(l){return this._logger.create(`get('${l}')`),l=this._prefix+l,await this._store.getItem(l)}async remove(l){this._logger.create(`remove('${l}')`),l=this._prefix+l;let a=await this._store.getItem(l);return await this._store.removeItem(l),a}async getAllKeys(){this._logger.create("getAllKeys");let l=await this._store.length,a=[];for(let r=0;r<l;r++){let e=await this._store.key(r);e&&e.indexOf(this._prefix)===0&&a.push(e.substr(this._prefix.length))}return a}},Xl="code",Zl="openid",ar="client_secret_post",lr=900,za=class{constructor({authority:l,metadataUrl:a,metadata:r,signingKeys:e,metadataSeed:t,client_id:i,client_secret:n,response_type:s=Xl,scope:u=Zl,redirect_uri:o,post_logout_redirect_uri:b,client_authentication:m=ar,prompt:c,display:v,max_age:k,ui_locales:_,acr_values:f,resource:g,response_mode:h,filterProtocolClaims:z=!0,loadUserInfo:E=!1,requestTimeoutInSeconds:T,staleStateAgeInSeconds:x=lr,mergeClaimsStrategy:R={array:"replace"},disablePKCE:P=!1,stateStore:S,revokeTokenAdditionalContentTypes:M,fetchRequestCredentials:I,refreshTokenAllowedScope:D,extraQueryParams:El={},extraTokenParams:Tl={},extraHeaders:Pl={},dpop:Cl,omitScopeWhenRequesting:Il=!1}){var Ia;if(this.authority=l,a?this.metadataUrl=a:(this.metadataUrl=l,l&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=r,this.metadataSeed=t,this.signingKeys=e,this.client_id=i,this.client_secret=n,this.response_type=s,this.scope=u,this.redirect_uri=o,this.post_logout_redirect_uri=b,this.client_authentication=m,this.prompt=c,this.display=v,this.max_age=k,this.ui_locales=_,this.acr_values=f,this.resource=g,this.response_mode=h,this.filterProtocolClaims=z??!0,this.loadUserInfo=!!E,this.staleStateAgeInSeconds=x,this.mergeClaimsStrategy=R,this.omitScopeWhenRequesting=Il,this.disablePKCE=!!P,this.revokeTokenAdditionalContentTypes=M,this.fetchRequestCredentials=I||"same-origin",this.requestTimeoutInSeconds=T,S)this.stateStore=S;else{let Rl=typeof window<"u"?window.localStorage:new vl;this.stateStore=new hl({store:Rl})}if(this.refreshTokenAllowedScope=D,this.extraQueryParams=El,this.extraTokenParams=Tl,this.extraHeaders=Pl,this.dpop=Cl,this.dpop&&!((Ia=this.dpop)!=null&&Ia.store))throw new Error("A DPoPStore is required when dpop is enabled")}},rr=class{constructor(l,a){this._settings=l,this._metadataService=a,this._logger=new d("UserInfoService"),this._getClaimsFromJwt=async r=>{let e=this._logger.create("_getClaimsFromJwt");try{let t=sa.decode(r);return e.debug("JWT decoding successful"),t}catch(t){throw e.error("Error parsing JWT response"),t}},this._jsonService=new Ca(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(l){let a=this._logger.create("getClaims");l||this._logger.throw(new Error("No token passed"));let r=await this._metadataService.getUserInfoEndpoint();a.debug("got userinfo url",r);let e=await this._jsonService.getJson(r,{token:l,credentials:this._settings.fetchRequestCredentials,timeoutInSeconds:this._settings.requestTimeoutInSeconds});return a.debug("got claims",e),e}},dl=class{constructor(l,a){this._settings=l,this._metadataService=a,this._logger=new d("TokenClient"),this._jsonService=new Ca(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:l="authorization_code",redirect_uri:a=this._settings.redirect_uri,client_id:r=this._settings.client_id,client_secret:e=this._settings.client_secret,extraHeaders:t,...i}){let n=this._logger.create("exchangeCode");r||n.throw(new Error("A client_id is required")),a||n.throw(new Error("A redirect_uri is required")),i.code||n.throw(new Error("A code is required"));let s=new URLSearchParams({grant_type:l,redirect_uri:a});for(let[m,c]of Object.entries(i))c!=null&&s.set(m,c);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(e==null)throw n.throw(new Error("A client_secret is required")),null;u=C.generateBasicAuth(r,e);break;case"client_secret_post":s.append("client_id",r),e&&s.append("client_secret",e);break}let o=await this._metadataService.getTokenEndpoint(!1);n.debug("got token endpoint");let b=await this._jsonService.postForm(o,{body:s,basicAuth:u,timeoutInSeconds:this._settings.requestTimeoutInSeconds,initCredentials:this._settings.fetchRequestCredentials,extraHeaders:t});return n.debug("got response"),b}async exchangeCredentials({grant_type:l="password",client_id:a=this._settings.client_id,client_secret:r=this._settings.client_secret,scope:e=this._settings.scope,...t}){let i=this._logger.create("exchangeCredentials");a||i.throw(new Error("A client_id is required"));let n=new URLSearchParams({grant_type:l});this._settings.omitScopeWhenRequesting||n.set("scope",e);for(let[b,m]of Object.entries(t))m!=null&&n.set(b,m);let s;switch(this._settings.client_authentication){case"client_secret_basic":if(r==null)throw i.throw(new Error("A client_secret is required")),null;s=C.generateBasicAuth(a,r);break;case"client_secret_post":n.append("client_id",a),r&&n.append("client_secret",r);break}let u=await this._metadataService.getTokenEndpoint(!1);i.debug("got token endpoint");let o=await this._jsonService.postForm(u,{body:n,basicAuth:s,timeoutInSeconds:this._settings.requestTimeoutInSeconds,initCredentials:this._settings.fetchRequestCredentials});return i.debug("got response"),o}async exchangeRefreshToken({grant_type:l="refresh_token",client_id:a=this._settings.client_id,client_secret:r=this._settings.client_secret,timeoutInSeconds:e,extraHeaders:t,...i}){let n=this._logger.create("exchangeRefreshToken");a||n.throw(new Error("A client_id is required")),i.refresh_token||n.throw(new Error("A refresh_token is required"));let s=new URLSearchParams({grant_type:l});for(let[m,c]of Object.entries(i))Array.isArray(c)?c.forEach(v=>s.append(m,v)):c!=null&&s.set(m,c);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(r==null)throw n.throw(new Error("A client_secret is required")),null;u=C.generateBasicAuth(a,r);break;case"client_secret_post":s.append("client_id",a),r&&s.append("client_secret",r);break}let o=await this._metadataService.getTokenEndpoint(!1);n.debug("got token endpoint");let b=await this._jsonService.postForm(o,{body:s,basicAuth:u,timeoutInSeconds:e,initCredentials:this._settings.fetchRequestCredentials,extraHeaders:t});return n.debug("got response"),b}async revoke(l){var a;let r=this._logger.create("revoke");l.token||r.throw(new Error("A token is required"));let e=await this._metadataService.getRevocationEndpoint(!1);r.debug(`got revocation endpoint, revoking ${(a=l.token_type_hint)!=null?a:"default token type"}`);let t=new URLSearchParams;for(let[i,n]of Object.entries(l))n!=null&&t.set(i,n);t.set("client_id",this._settings.client_id),this._settings.client_secret&&t.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(e,{body:t,timeoutInSeconds:this._settings.requestTimeoutInSeconds}),r.debug("got response")}},er=class{constructor(l,a,r){this._settings=l,this._metadataService=a,this._claimsService=r,this._logger=new d("ResponseValidator"),this._userInfoService=new rr(this._settings,this._metadataService),this._tokenClient=new dl(this._settings,this._metadataService)}async validateSigninResponse(l,a,r){let e=this._logger.create("validateSigninResponse");this._processSigninState(l,a),e.debug("state processed"),await this._processCode(l,a,r),e.debug("code processed"),l.isOpenId&&this._validateIdTokenAttributes(l),e.debug("tokens validated"),await this._processClaims(l,a?.skipUserInfo,l.isOpenId),e.debug("claims processed")}async validateCredentialsResponse(l,a){let r=this._logger.create("validateCredentialsResponse"),e=l.isOpenId&&!!l.id_token;e&&this._validateIdTokenAttributes(l),r.debug("tokens validated"),await this._processClaims(l,a,e),r.debug("claims processed")}async validateRefreshResponse(l,a){var r,e;let t=this._logger.create("validateRefreshResponse");l.userState=a.data,(r=l.session_state)!=null||(l.session_state=a.session_state),(e=l.scope)!=null||(l.scope=a.scope),l.isOpenId&&l.id_token&&(this._validateIdTokenAttributes(l,a.id_token),t.debug("ID Token validated")),l.id_token||(l.id_token=a.id_token,l.profile=a.profile);let i=l.isOpenId&&!!l.id_token;await this._processClaims(l,!1,i),t.debug("claims processed")}validateSignoutResponse(l,a){let r=this._logger.create("validateSignoutResponse");if(a.id!==l.state&&r.throw(new Error("State does not match")),r.debug("state validated"),l.userState=a.data,l.error)throw r.warn("Response was error",l.error),new J(l)}_processSigninState(l,a){var r;let e=this._logger.create("_processSigninState");if(a.id!==l.state&&e.throw(new Error("State does not match")),a.client_id||e.throw(new Error("No client_id on state")),a.authority||e.throw(new Error("No authority on state")),this._settings.authority!==a.authority&&e.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==a.client_id&&e.throw(new Error("client_id mismatch on settings vs. signin state")),e.debug("state validated"),l.userState=a.data,l.url_state=a.url_state,(r=l.scope)!=null||(l.scope=a.scope),l.error)throw e.warn("Response was error",l.error),new J(l);a.code_verifier&&!l.code&&e.throw(new Error("Expected code in response"))}async _processClaims(l,a=!1,r=!0){let e=this._logger.create("_processClaims");if(l.profile=this._claimsService.filterProtocolClaims(l.profile),a||!this._settings.loadUserInfo||!l.access_token){e.debug("not loading user info");return}e.debug("loading user info");let t=await this._userInfoService.getClaims(l.access_token);e.debug("user info claims received from user info endpoint"),r&&t.sub!==l.profile.sub&&e.throw(new Error("subject from UserInfo response does not match subject in ID Token")),l.profile=this._claimsService.mergeClaims(l.profile,this._claimsService.filterProtocolClaims(t)),e.debug("user info claims received, updated profile:",l.profile)}async _processCode(l,a,r){let e=this._logger.create("_processCode");if(l.code){e.debug("Validating code");let t=await this._tokenClient.exchangeCode({client_id:a.client_id,client_secret:a.client_secret,code:l.code,redirect_uri:a.redirect_uri,code_verifier:a.code_verifier,extraHeaders:r,...a.extraTokenParams});Object.assign(l,t)}else e.debug("No code to process")}_validateIdTokenAttributes(l,a){var r;let e=this._logger.create("_validateIdTokenAttributes");e.debug("decoding ID Token JWT");let t=sa.decode((r=l.id_token)!=null?r:"");if(t.sub||e.throw(new Error("ID Token is missing a subject claim")),a){let i=sa.decode(a);t.sub!==i.sub&&e.throw(new Error("sub in id_token does not match current sub")),t.auth_time&&t.auth_time!==i.auth_time&&e.throw(new Error("auth_time in id_token does not match original auth_time")),t.azp&&t.azp!==i.azp&&e.throw(new Error("azp in id_token does not match original azp")),!t.azp&&i.azp&&e.throw(new Error("azp not in id_token, but present in original id_token"))}l.profile=t}},oa=class Ea{constructor(a){this.id=a.id||C.generateUUIDv4(),this.data=a.data,a.created&&a.created>0?this.created=a.created:this.created=H.getEpochTime(),this.request_type=a.request_type,this.url_state=a.url_state}toStorageString(){return new d("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(a){return d.createStatic("State","fromStorageString"),Promise.resolve(new Ea(JSON.parse(a)))}static async clearStaleState(a,r){let e=d.createStatic("State","clearStaleState"),t=H.getEpochTime()-r,i=await a.getAllKeys();e.debug("got keys",i);for(let n=0;n<i.length;n++){let s=i[n],u=await a.get(s),o=!1;if(u)try{let b=await Ea.fromStorageString(u);e.debug("got item from key:",s,b.created),b.created<=t&&(o=!0)}catch(b){e.error("Error parsing state for key:",s,b),o=!0}else e.debug("no item in storage for key:",s),o=!0;o&&(e.debug("removed item for key:",s),a.remove(s))}}},gl=class Ta extends oa{constructor(a){super(a),this.code_verifier=a.code_verifier,this.code_challenge=a.code_challenge,this.authority=a.authority,this.client_id=a.client_id,this.redirect_uri=a.redirect_uri,this.scope=a.scope,this.client_secret=a.client_secret,this.extraTokenParams=a.extraTokenParams,this.response_mode=a.response_mode,this.skipUserInfo=a.skipUserInfo}static async create(a){let r=a.code_verifier===!0?C.generateCodeVerifier():a.code_verifier||void 0,e=r?await C.generateCodeChallenge(r):void 0;return new Ta({...a,code_verifier:r,code_challenge:e})}toStorageString(){return new d("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(a){d.createStatic("SigninState","fromStorageString");let r=JSON.parse(a);return Ta.create(r)}},pl=class kl{constructor(a){this.url=a.url,this.state=a.state}static async create({url:a,authority:r,client_id:e,redirect_uri:t,response_type:i,scope:n,state_data:s,response_mode:u,request_type:o,client_secret:b,nonce:m,url_state:c,resource:v,skipUserInfo:k,extraQueryParams:_,extraTokenParams:f,disablePKCE:g,dpopJkt:h,omitScopeWhenRequesting:z,...E}){if(!a)throw this._logger.error("create: No url passed"),new Error("url");if(!e)throw this._logger.error("create: No client_id passed"),new Error("client_id");if(!t)throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");if(!i)throw this._logger.error("create: No response_type passed"),new Error("response_type");if(!n)throw this._logger.error("create: No scope passed"),new Error("scope");if(!r)throw this._logger.error("create: No authority passed"),new Error("authority");let T=await gl.create({data:s,request_type:o,url_state:c,code_verifier:!g,client_id:e,authority:r,redirect_uri:t,response_mode:u,client_secret:b,scope:n,extraTokenParams:f,skipUserInfo:k}),x=new URL(a);x.searchParams.append("client_id",e),x.searchParams.append("redirect_uri",t),x.searchParams.append("response_type",i),z||x.searchParams.append("scope",n),m&&x.searchParams.append("nonce",m),h&&x.searchParams.append("dpop_jkt",h);let R=T.id;c&&(R=`${R}${V}${c}`),x.searchParams.append("state",R),T.code_challenge&&(x.searchParams.append("code_challenge",T.code_challenge),x.searchParams.append("code_challenge_method","S256")),v&&(Array.isArray(v)?v:[v]).forEach(S=>x.searchParams.append("resource",S));for(let[P,S]of Object.entries({response_mode:u,...E,..._}))S!=null&&x.searchParams.append(P,S.toString());return new kl({url:x.href,state:T})}};pl._logger=new d("SigninRequest");var tr=pl,ir="openid",wa=class{constructor(l){if(this.access_token="",this.token_type="",this.profile={},this.state=l.get("state"),this.session_state=l.get("session_state"),this.state){let a=decodeURIComponent(this.state).split(V);this.state=a[0],a.length>1&&(this.url_state=a.slice(1).join(V))}this.error=l.get("error"),this.error_description=l.get("error_description"),this.error_uri=l.get("error_uri"),this.code=l.get("code")}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-H.getEpochTime()}set expires_in(l){typeof l=="string"&&(l=Number(l)),l!==void 0&&l>=0&&(this.expires_at=Math.floor(l)+H.getEpochTime())}get isOpenId(){var l;return((l=this.scope)==null?void 0:l.split(" ").includes(ir))||!!this.id_token}},nr=class{constructor({url:l,state_data:a,id_token_hint:r,post_logout_redirect_uri:e,extraQueryParams:t,request_type:i,client_id:n,url_state:s}){if(this._logger=new d("SignoutRequest"),!l)throw this._logger.error("ctor: No url passed"),new Error("url");let u=new URL(l);if(r&&u.searchParams.append("id_token_hint",r),n&&u.searchParams.append("client_id",n),e&&(u.searchParams.append("post_logout_redirect_uri",e),a||s)){this.state=new oa({data:a,request_type:i,url_state:s});let o=this.state.id;s&&(o=`${o}${V}${s}`),u.searchParams.append("state",o)}for(let[o,b]of Object.entries({...t}))b!=null&&u.searchParams.append(o,b.toString());this.url=u.href}},sr=class{constructor(l){if(this.state=l.get("state"),this.state){let a=decodeURIComponent(this.state).split(V);this.state=a[0],a.length>1&&(this.url_state=a.slice(1).join(V))}this.error=l.get("error"),this.error_description=l.get("error_description"),this.error_uri=l.get("error_uri")}},or=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],mr=["sub","iss","aud","exp","iat"],ur=class{constructor(l){this._settings=l,this._logger=new d("ClaimsService")}filterProtocolClaims(l){let a={...l};if(this._settings.filterProtocolClaims){let r;Array.isArray(this._settings.filterProtocolClaims)?r=this._settings.filterProtocolClaims:r=or;for(let e of r)mr.includes(e)||delete a[e]}return a}mergeClaims(l,a){let r={...l};for(let[e,t]of Object.entries(a))if(r[e]!==t)if(Array.isArray(r[e])||Array.isArray(t))if(this._settings.mergeClaimsStrategy.array=="replace")r[e]=t;else{let i=Array.isArray(r[e])?r[e]:[r[e]];for(let n of Array.isArray(t)?t:[t])i.includes(n)||i.push(n);r[e]=i}else typeof r[e]=="object"&&typeof t=="object"?r[e]=this.mergeClaims(r[e],t):r[e]=t;return r}},fl=class{constructor(l,a){this.keys=l,this.nonce=a}},br=class{constructor(l,a){this._logger=new d("OidcClient"),this.settings=l instanceof za?l:new za(l),this.metadataService=a??new Ql(this.settings),this._claimsService=new ur(this.settings),this._validator=new er(this.settings,this.metadataService,this._claimsService),this._tokenClient=new dl(this.settings,this.metadataService)}async createSigninRequest({state:l,request:a,request_uri:r,request_type:e,id_token_hint:t,login_hint:i,skipUserInfo:n,nonce:s,url_state:u,response_type:o=this.settings.response_type,scope:b=this.settings.scope,redirect_uri:m=this.settings.redirect_uri,prompt:c=this.settings.prompt,display:v=this.settings.display,max_age:k=this.settings.max_age,ui_locales:_=this.settings.ui_locales,acr_values:f=this.settings.acr_values,resource:g=this.settings.resource,response_mode:h=this.settings.response_mode,extraQueryParams:z=this.settings.extraQueryParams,extraTokenParams:E=this.settings.extraTokenParams,dpopJkt:T,omitScopeWhenRequesting:x=this.settings.omitScopeWhenRequesting}){let R=this._logger.create("createSigninRequest");if(o!=="code")throw new Error("Only the Authorization Code flow (with PKCE) is supported");let P=await this.metadataService.getAuthorizationEndpoint();R.debug("Received authorization endpoint",P);let S=await tr.create({url:P,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:m,response_type:o,scope:b,state_data:l,url_state:u,prompt:c,display:v,max_age:k,ui_locales:_,id_token_hint:t,login_hint:i,acr_values:f,dpopJkt:T,resource:g,request:a,request_uri:r,extraQueryParams:z,extraTokenParams:E,request_type:e,response_mode:h,client_secret:this.settings.client_secret,skipUserInfo:n,nonce:s,disablePKCE:this.settings.disablePKCE,omitScopeWhenRequesting:x});await this.clearStaleState();let M=S.state;return await this.settings.stateStore.set(M.id,M.toStorageString()),S}async readSigninResponseState(l,a=!1){let r=this._logger.create("readSigninResponseState"),e=new wa(_a.readParams(l,this.settings.response_mode));if(!e.state)throw r.throw(new Error("No state in response")),null;let t=await this.settings.stateStore[a?"remove":"get"](e.state);if(!t)throw r.throw(new Error("No matching state found in storage")),null;return{state:await gl.fromStorageString(t),response:e}}async processSigninResponse(l,a,r=!0){let e=this._logger.create("processSigninResponse"),{state:t,response:i}=await this.readSigninResponseState(l,r);if(e.debug("received state from storage; validating response"),this.settings.dpop&&this.settings.dpop.store){let n=await this.getDpopProof(this.settings.dpop.store);a={...a,DPoP:n}}try{await this._validator.validateSigninResponse(i,t,a)}catch(n){if(n instanceof Sa&&this.settings.dpop){let s=await this.getDpopProof(this.settings.dpop.store,n.nonce);a.DPoP=s,await this._validator.validateSigninResponse(i,t,a)}else throw n}return i}async getDpopProof(l,a){let r,e;return(await l.getAllKeys()).includes(this.settings.client_id)?(e=await l.get(this.settings.client_id),e.nonce!==a&&a&&(e.nonce=a,await l.set(this.settings.client_id,e))):(r=await C.generateDPoPKeys(),e=new fl(r,a),await l.set(this.settings.client_id,e)),await C.generateDPoPProof({url:await this.metadataService.getTokenEndpoint(!1),httpMethod:"POST",keyPair:e.keys,nonce:e.nonce})}async processResourceOwnerPasswordCredentials({username:l,password:a,skipUserInfo:r=!1,extraTokenParams:e={}}){let t=await this._tokenClient.exchangeCredentials({username:l,password:a,...e}),i=new wa(new URLSearchParams);return Object.assign(i,t),await this._validator.validateCredentialsResponse(i,r),i}async useRefreshToken({state:l,redirect_uri:a,resource:r,timeoutInSeconds:e,extraHeaders:t,extraTokenParams:i}){var n;let s=this._logger.create("useRefreshToken"),u;if(this.settings.refreshTokenAllowedScope===void 0)u=l.scope;else{let m=this.settings.refreshTokenAllowedScope.split(" ");u=(((n=l.scope)==null?void 0:n.split(" "))||[]).filter(v=>m.includes(v)).join(" ")}if(this.settings.dpop&&this.settings.dpop.store){let m=await this.getDpopProof(this.settings.dpop.store);t={...t,DPoP:m}}let o;try{o=await this._tokenClient.exchangeRefreshToken({refresh_token:l.refresh_token,scope:u,redirect_uri:a,resource:r,timeoutInSeconds:e,extraHeaders:t,...i})}catch(m){if(m instanceof Sa&&this.settings.dpop)t.DPoP=await this.getDpopProof(this.settings.dpop.store,m.nonce),o=await this._tokenClient.exchangeRefreshToken({refresh_token:l.refresh_token,scope:u,redirect_uri:a,resource:r,timeoutInSeconds:e,extraHeaders:t,...i});else throw m}let b=new wa(new URLSearchParams);return Object.assign(b,o),s.debug("validating response",b),await this._validator.validateRefreshResponse(b,{...l,scope:u}),b}async createSignoutRequest({state:l,id_token_hint:a,client_id:r,request_type:e,url_state:t,post_logout_redirect_uri:i=this.settings.post_logout_redirect_uri,extraQueryParams:n=this.settings.extraQueryParams}={}){let s=this._logger.create("createSignoutRequest"),u=await this.metadataService.getEndSessionEndpoint();if(!u)throw s.throw(new Error("No end session endpoint")),null;s.debug("Received end session endpoint",u),!r&&i&&!a&&(r=this.settings.client_id);let o=new nr({url:u,id_token_hint:a,client_id:r,post_logout_redirect_uri:i,state_data:l,extraQueryParams:n,request_type:e,url_state:t});await this.clearStaleState();let b=o.state;return b&&(s.debug("Signout request has state to persist"),await this.settings.stateStore.set(b.id,b.toStorageString())),o}async readSignoutResponseState(l,a=!1){let r=this._logger.create("readSignoutResponseState"),e=new sr(_a.readParams(l,this.settings.response_mode));if(!e.state){if(r.debug("No state in response"),e.error)throw r.warn("Response was error:",e.error),new J(e);return{state:void 0,response:e}}let t=await this.settings.stateStore[a?"remove":"get"](e.state);if(!t)throw r.throw(new Error("No matching state found in storage")),null;return{state:await oa.fromStorageString(t),response:e}}async processSignoutResponse(l){let a=this._logger.create("processSignoutResponse"),{state:r,response:e}=await this.readSignoutResponseState(l,!0);return r?(a.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(e,r)):a.debug("No state from storage; skipping response validation"),e}clearStaleState(){return this._logger.create("clearStaleState"),oa.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(l,a){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:l,token_type_hint:a})}},cr=class{constructor(l){this._userManager=l,this._logger=new d("SessionMonitor"),this._start=async a=>{let r=a.session_state;if(!r)return;let e=this._logger.create("_start");if(a.profile?(this._sub=a.profile.sub,e.debug("session_state",r,", sub",this._sub)):(this._sub=void 0,e.debug("session_state",r,", anonymous user")),this._checkSessionIFrame){this._checkSessionIFrame.start(r);return}try{let t=await this._userManager.metadataService.getCheckSessionIframe();if(t){e.debug("initializing check session iframe");let i=this._userManager.settings.client_id,n=this._userManager.settings.checkSessionIntervalInSeconds,s=this._userManager.settings.stopCheckSessionOnError,u=new Gl(this._callback,i,t,n,s);await u.load(),this._checkSessionIFrame=u,u.start(r)}else e.warn("no check session iframe found in the metadata")}catch(t){e.error("Error from getCheckSessionIframe:",t instanceof Error?t.message:t)}},this._stop=()=>{let a=this._logger.create("_stop");if(this._sub=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){let r=setInterval(async()=>{clearInterval(r);try{let e=await this._userManager.querySessionStatus();if(e){let t={session_state:e.session_state,profile:e.sub?{sub:e.sub}:null};this._start(t)}}catch(e){a.error("error from querySessionStatus",e instanceof Error?e.message:e)}},1e3)}},this._callback=async()=>{let a=this._logger.create("_callback");try{let r=await this._userManager.querySessionStatus(),e=!0;r&&this._checkSessionIFrame?r.sub===this._sub?(e=!1,this._checkSessionIFrame.start(r.session_state),a.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",r.session_state),await this._userManager.events._raiseUserSessionChanged()):a.debug("different subject signed into OP",r.sub):a.debug("subject no longer signed into OP"),e?this._sub?await this._userManager.events._raiseUserSignedOut():await this._userManager.events._raiseUserSignedIn():a.debug("no change in session detected, no event to raise")}catch(r){this._sub&&(a.debug("Error calling queryCurrentSigninSession; raising signed out event",r),await this._userManager.events._raiseUserSignedOut())}},l||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(a=>{this._logger.error(a)})}async _init(){this._logger.create("_init");let l=await this._userManager.getUser();if(l)this._start(l);else if(this._userManager.settings.monitorAnonymousSession){let a=await this._userManager.querySessionStatus();if(a){let r={session_state:a.session_state,profile:a.sub?{sub:a.sub}:null};this._start(r)}}}},xa=class wl{constructor(a){var r;this.id_token=a.id_token,this.session_state=(r=a.session_state)!=null?r:null,this.access_token=a.access_token,this.refresh_token=a.refresh_token,this.token_type=a.token_type,this.scope=a.scope,this.profile=a.profile,this.expires_at=a.expires_at,this.state=a.userState,this.url_state=a.url_state}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-H.getEpochTime()}set expires_in(a){a!==void 0&&(this.expires_at=Math.floor(a)+H.getEpochTime())}get expired(){let a=this.expires_in;if(a!==void 0)return a<=0}get scopes(){var a,r;return(r=(a=this.scope)==null?void 0:a.split(" "))!=null?r:[]}toStorageString(){return new d("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(a){return d.createStatic("User","fromStorageString"),new wl(JSON.parse(a))}},ml="oidc-client",xl=class{constructor(){this._abort=new $("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(l){let a=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");a.debug("setting URL in window"),this._window.location.replace(l.url);let{url:r,keepOpen:e}=await new Promise((t,i)=>{let n=u=>{var o;let b=u.data,m=(o=l.scriptOrigin)!=null?o:window.location.origin;if(!(u.origin!==m||b?.source!==ml)){try{let c=_a.readParams(b.url,l.response_mode).get("state");if(c||a.warn("no state found in response url"),u.source!==this._window&&c!==l.state)return}catch{this._dispose(),i(new Error("Invalid response from window"))}t(b)}};window.addEventListener("message",n,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",n,!1));let s=new BroadcastChannel(`oidc-client-popup-${l.state}`);s.addEventListener("message",n,!1),this._disposeHandlers.add(()=>s.close()),this._disposeHandlers.add(this._abort.addHandler(u=>{this._dispose(),i(u)}))});return a.debug("got response from window"),this._dispose(),e||this.close(),{url:r}}_dispose(){this._logger.create("_dispose");for(let l of this._disposeHandlers)l();this._disposeHandlers.clear()}static _notifyParent(l,a,r=!1,e=window.location.origin){let t={source:ml,url:a,keepOpen:r},i=new d("_notifyParent");if(l)i.debug("With parent. Using parent.postMessage."),l.postMessage(t,e);else{i.debug("No parent. Using BroadcastChannel.");let n=new URL(a).searchParams.get("state");if(!n)throw new Error("No parent and no state in URL. Can't complete notification.");let s=new BroadcastChannel(`oidc-client-popup-${n}`);s.postMessage(t),s.close()}}},yl={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},_l="_blank",vr=60,hr=2,Sl=10,dr=class extends za{constructor(l){let{popup_redirect_uri:a=l.redirect_uri,popup_post_logout_redirect_uri:r=l.post_logout_redirect_uri,popupWindowFeatures:e=yl,popupWindowTarget:t=_l,redirectMethod:i="assign",redirectTarget:n="self",iframeNotifyParentOrigin:s=l.iframeNotifyParentOrigin,iframeScriptOrigin:u=l.iframeScriptOrigin,requestTimeoutInSeconds:o,silent_redirect_uri:b=l.redirect_uri,silentRequestTimeoutInSeconds:m,automaticSilentRenew:c=!0,validateSubOnSilentRenew:v=!0,includeIdTokenInSilentRenew:k=!1,monitorSession:_=!1,monitorAnonymousSession:f=!1,checkSessionIntervalInSeconds:g=hr,query_status_response_type:h="code",stopCheckSessionOnError:z=!0,revokeTokenTypes:E=["access_token","refresh_token"],revokeTokensOnSignout:T=!1,includeIdTokenInSilentSignout:x=!1,accessTokenExpiringNotificationTimeInSeconds:R=vr,userStore:P}=l;if(super(l),this.popup_redirect_uri=a,this.popup_post_logout_redirect_uri=r,this.popupWindowFeatures=e,this.popupWindowTarget=t,this.redirectMethod=i,this.redirectTarget=n,this.iframeNotifyParentOrigin=s,this.iframeScriptOrigin=u,this.silent_redirect_uri=b,this.silentRequestTimeoutInSeconds=m||o||Sl,this.automaticSilentRenew=c,this.validateSubOnSilentRenew=v,this.includeIdTokenInSilentRenew=k,this.monitorSession=_,this.monitorAnonymousSession=f,this.checkSessionIntervalInSeconds=g,this.stopCheckSessionOnError=z,this.query_status_response_type=h,this.revokeTokenTypes=E,this.revokeTokensOnSignout=T,this.includeIdTokenInSilentSignout=x,this.accessTokenExpiringNotificationTimeInSeconds=R,P)this.userStore=P;else{let S=typeof window<"u"?window.sessionStorage:new vl;this.userStore=new hl({store:S})}}},ul=class zl extends xl{constructor({silentRequestTimeoutInSeconds:a=Sl}){super(),this._logger=new d("IFrameWindow"),this._timeoutInSeconds=a,this._frame=zl.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){let a=window.document.createElement("iframe");return a.style.visibility="hidden",a.style.position="fixed",a.style.left="-1000px",a.style.top="0",a.width="0",a.height="0",window.document.body.appendChild(a),a}async navigate(a){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);let r=setTimeout(()=>void this._abort.raise(new Pa("IFrame timed out without a response")),this._timeoutInSeconds*1e3);return this._disposeHandlers.add(()=>clearTimeout(r)),await super.navigate(a)}close(){var a;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",r=>{var e;let t=r.target;(e=t.parentNode)==null||e.removeChild(t),this._abort.raise(new Error("IFrame removed from DOM"))},!0),(a=this._frame.contentWindow)==null||a.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(a,r){return super._notifyParent(window.parent,a,!1,r)}},gr=class{constructor(l){this._settings=l,this._logger=new d("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:l=this._settings.silentRequestTimeoutInSeconds}){return new ul({silentRequestTimeoutInSeconds:l})}async callback(l){this._logger.create("callback"),ul.notifyParent(l,this._settings.iframeNotifyParentOrigin)}},pr=500,kr=1e3,bl=class extends xl{constructor({popupWindowTarget:l=_l,popupWindowFeatures:a={},popupSignal:r}){super(),this._logger=new d("PopupWindow");let e=ol.center({...yl,...a});this._window=window.open(void 0,l,ol.serialize(e)),r&&r.addEventListener("abort",()=>{var t;this._abort.raise(new Error((t=r.reason)!=null?t:"Popup aborted"))}),a.closePopupWindowAfterInSeconds&&a.closePopupWindowAfterInSeconds>0&&setTimeout(()=>{if(!this._window||typeof this._window.closed!="boolean"||this._window.closed){this._abort.raise(new Error("Popup blocked by user"));return}this.close()},a.closePopupWindowAfterInSeconds*kr)}async navigate(l){var a;(a=this._window)==null||a.focus();let r=setInterval(()=>{(!this._window||this._window.closed)&&(this._logger.debug("Popup closed by user or isolated by redirect"),e(),this._disposeHandlers.delete(e))},pr),e=()=>clearInterval(r);return this._disposeHandlers.add(e),await super.navigate(l)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(l,a){super._notifyParent(window.opener,l,a),!a&&!window.opener&&window.close()}},fr=class{constructor(l){this._settings=l,this._logger=new d("PopupNavigator")}async prepare({popupWindowFeatures:l=this._settings.popupWindowFeatures,popupWindowTarget:a=this._settings.popupWindowTarget,popupSignal:r}){return new bl({popupWindowFeatures:l,popupWindowTarget:a,popupSignal:r})}async callback(l,{keepOpen:a=!1}){this._logger.create("callback"),bl.notifyOpener(l,a)}},wr=class{constructor(l){this._settings=l,this._logger=new d("RedirectNavigator")}async prepare({redirectMethod:l=this._settings.redirectMethod,redirectTarget:a=this._settings.redirectTarget}){var r;this._logger.create("prepare");let e=window.self;a==="top"&&(e=(r=window.top)!=null?r:window.self);let t=e.location[l].bind(e.location),i;return{navigate:async n=>{this._logger.create("navigate");let s=new Promise((u,o)=>{i=o});return t(n.url),await s},close:()=>{this._logger.create("close"),i?.(new Error("Redirect aborted")),e.stop()}}}async callback(){}},xr=class extends Yl{constructor(l){super({expiringNotificationTimeInSeconds:l.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new d("UserManagerEvents"),this._userLoaded=new $("User loaded"),this._userUnloaded=new $("User unloaded"),this._silentRenewError=new $("Silent renew error"),this._userSignedIn=new $("User signed in"),this._userSignedOut=new $("User signed out"),this._userSessionChanged=new $("User session changed")}async load(l,a=!0){await super.load(l),a&&await this._userLoaded.raise(l)}async unload(){await super.unload(),await this._userUnloaded.raise()}addUserLoaded(l){return this._userLoaded.addHandler(l)}removeUserLoaded(l){return this._userLoaded.removeHandler(l)}addUserUnloaded(l){return this._userUnloaded.addHandler(l)}removeUserUnloaded(l){return this._userUnloaded.removeHandler(l)}addSilentRenewError(l){return this._silentRenewError.addHandler(l)}removeSilentRenewError(l){return this._silentRenewError.removeHandler(l)}async _raiseSilentRenewError(l){await this._silentRenewError.raise(l)}addUserSignedIn(l){return this._userSignedIn.addHandler(l)}removeUserSignedIn(l){this._userSignedIn.removeHandler(l)}async _raiseUserSignedIn(){await this._userSignedIn.raise()}addUserSignedOut(l){return this._userSignedOut.addHandler(l)}removeUserSignedOut(l){this._userSignedOut.removeHandler(l)}async _raiseUserSignedOut(){await this._userSignedOut.raise()}addUserSessionChanged(l){return this._userSessionChanged.addHandler(l)}removeUserSessionChanged(l){this._userSessionChanged.removeHandler(l)}async _raiseUserSessionChanged(){await this._userSessionChanged.raise()}},yr=class{constructor(l){this._userManager=l,this._logger=new d("SilentRenewService"),this._isStarted=!1,this._retryTimer=new H("Retry Silent Renew"),this._tokenExpiring=async()=>{let a=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),a.debug("silent token renewal successful")}catch(r){if(r instanceof Pa){a.warn("ErrorTimeout from signinSilent:",r,"retry in 5s"),this._retryTimer.init(5);return}a.error("Error from signinSilent:",r),await this._userManager.events._raiseSilentRenewError(r)}}}async start(){let l=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(a){l.error("getUser error",a)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},_r=class{constructor(l){this.refresh_token=l.refresh_token,this.id_token=l.id_token,this.session_state=l.session_state,this.scope=l.scope,this.profile=l.profile,this.data=l.state}},Yr=class{constructor(l,a,r,e){this._logger=new d("UserManager"),this.settings=new dr(l),this._client=new br(l),this._redirectNavigator=a??new wr(this.settings),this._popupNavigator=r??new fr(this.settings),this._iframeNavigator=e??new gr(this.settings),this._events=new xr(this.settings),this._silentRenewService=new yr(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new cr(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(l=!1){let a=this._logger.create("getUser"),r=await this._loadUser();return r?(a.info("user loaded"),await this._events.load(r,l),r):(a.info("user not found in storage"),null)}async removeUser(){let l=this._logger.create("removeUser");await this.storeUser(null),l.info("user removed from storage"),await this._events.unload()}async signinRedirect(l={}){var a;this._logger.create("signinRedirect");let{redirectMethod:r,...e}=l,t;(a=this.settings.dpop)!=null&&a.bind_authorization_code&&(t=await this.generateDPoPJkt(this.settings.dpop));let i=await this._redirectNavigator.prepare({redirectMethod:r});await this._signinStart({request_type:"si:r",dpopJkt:t,...e},i)}async signinRedirectCallback(l=window.location.href){let a=this._logger.create("signinRedirectCallback"),r=await this._signinEnd(l);return r.profile&&r.profile.sub?a.info("success, signed in subject",r.profile.sub):a.info("no subject"),r}async signinResourceOwnerCredentials({username:l,password:a,skipUserInfo:r=!1}){let e=this._logger.create("signinResourceOwnerCredential"),t=await this._client.processResourceOwnerPasswordCredentials({username:l,password:a,skipUserInfo:r,extraTokenParams:this.settings.extraTokenParams});e.debug("got signin response");let i=await this._buildUser(t);return i.profile&&i.profile.sub?e.info("success, signed in subject",i.profile.sub):e.info("no subject"),i}async signinPopup(l={}){var a;let r=this._logger.create("signinPopup"),e;(a=this.settings.dpop)!=null&&a.bind_authorization_code&&(e=await this.generateDPoPJkt(this.settings.dpop));let{popupWindowFeatures:t,popupWindowTarget:i,popupSignal:n,...s}=l,u=this.settings.popup_redirect_uri;u||r.throw(new Error("No popup_redirect_uri configured"));let o=await this._popupNavigator.prepare({popupWindowFeatures:t,popupWindowTarget:i,popupSignal:n}),b=await this._signin({request_type:"si:p",redirect_uri:u,display:"popup",dpopJkt:e,...s},o);return b&&(b.profile&&b.profile.sub?r.info("success, signed in subject",b.profile.sub):r.info("no subject")),b}async signinPopupCallback(l=window.location.href,a=!1){let r=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(l,{keepOpen:a}),r.info("success")}async signinSilent(l={}){var a,r;let e=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:t,...i}=l,n=await this._loadUser();if(n?.refresh_token){e.debug("using refresh token");let m=new _r(n);return await this._useRefreshToken({state:m,redirect_uri:i.redirect_uri,resource:i.resource,extraTokenParams:i.extraTokenParams,timeoutInSeconds:t})}let s;(a=this.settings.dpop)!=null&&a.bind_authorization_code&&(s=await this.generateDPoPJkt(this.settings.dpop));let u=this.settings.silent_redirect_uri;u||e.throw(new Error("No silent_redirect_uri configured"));let o;n&&this.settings.validateSubOnSilentRenew&&(e.debug("subject prior to silent renew:",n.profile.sub),o=n.profile.sub);let b=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:t});return n=await this._signin({request_type:"si:s",redirect_uri:u,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?n?.id_token:void 0,dpopJkt:s,...i},b,o),n&&((r=n.profile)!=null&&r.sub?e.info("success, signed in subject",n.profile.sub):e.info("no subject")),n}async _useRefreshToken(l){let a=await this._client.useRefreshToken({timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds,...l}),r=new xa({...l.state,...a});return await this.storeUser(r),await this._events.load(r),r}async signinSilentCallback(l=window.location.href){let a=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(l),a.info("success")}async signinCallback(l=window.location.href){let{state:a}=await this._client.readSigninResponseState(l);switch(a.request_type){case"si:r":return await this.signinRedirectCallback(l);case"si:p":await this.signinPopupCallback(l);break;case"si:s":await this.signinSilentCallback(l);break;default:throw new Error("invalid response_type in state")}}async signoutCallback(l=window.location.href,a=!1){let{state:r}=await this._client.readSignoutResponseState(l);if(r)switch(r.request_type){case"so:r":return await this.signoutRedirectCallback(l);case"so:p":await this.signoutPopupCallback(l,a);break;case"so:s":await this.signoutSilentCallback(l);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(l={}){let a=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:r,...e}=l,t=this.settings.silent_redirect_uri;t||a.throw(new Error("No silent_redirect_uri configured"));let i=await this._loadUser(),n=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r}),s=await this._signinStart({request_type:"si:s",redirect_uri:t,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?i?.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...e},n);try{let u={},o=await this._client.processSigninResponse(s.url,u);return a.debug("got signin response"),o.session_state&&o.profile.sub?(a.info("success for subject",o.profile.sub),{session_state:o.session_state,sub:o.profile.sub}):(a.info("success, user not authenticated"),null)}catch(u){if(this.settings.monitorAnonymousSession&&u instanceof J)switch(u.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return a.info("success for anonymous user"),{session_state:u.session_state}}throw u}}async _signin(l,a,r){let e=await this._signinStart(l,a);return await this._signinEnd(e.url,r)}async _signinStart(l,a){let r=this._logger.create("_signinStart");try{let e=await this._client.createSigninRequest(l);return r.debug("got signin request"),await a.navigate({url:e.url,state:e.state.id,response_mode:e.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(e){throw r.debug("error after preparing navigator, closing navigator window"),a.close(),e}}async _signinEnd(l,a){let r=this._logger.create("_signinEnd"),e={},t=await this._client.processSigninResponse(l,e);return r.debug("got signin response"),await this._buildUser(t,a)}async _buildUser(l,a){let r=this._logger.create("_buildUser"),e=new xa(l);if(a){if(a!==e.profile.sub)throw r.debug("current user does not match user returned from signin. sub from signin:",e.profile.sub),new J({...l,error:"login_required"});r.debug("current user matches user returned from signin")}return await this.storeUser(e),r.debug("user stored"),await this._events.load(e),e}async signoutRedirect(l={}){let a=this._logger.create("signoutRedirect"),{redirectMethod:r,...e}=l,t=await this._redirectNavigator.prepare({redirectMethod:r});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...e},t),a.info("success")}async signoutRedirectCallback(l=window.location.href){let a=this._logger.create("signoutRedirectCallback"),r=await this._signoutEnd(l);return a.info("success"),r}async signoutPopup(l={}){let a=this._logger.create("signoutPopup"),{popupWindowFeatures:r,popupWindowTarget:e,popupSignal:t,...i}=l,n=this.settings.popup_post_logout_redirect_uri,s=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:e,popupSignal:t});await this._signout({request_type:"so:p",post_logout_redirect_uri:n,state:n==null?void 0:{},...i},s),a.info("success")}async signoutPopupCallback(l=window.location.href,a=!1){let r=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(l,{keepOpen:a}),r.info("success")}async _signout(l,a){let r=await this._signoutStart(l,a);return await this._signoutEnd(r.url)}async _signoutStart(l={},a){var r;let e=this._logger.create("_signoutStart");try{let t=await this._loadUser();e.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(t);let i=l.id_token_hint||t&&t.id_token;i&&(e.debug("setting id_token_hint in signout request"),l.id_token_hint=i),await this.removeUser(),e.debug("user removed, creating signout request");let n=await this._client.createSignoutRequest(l);return e.debug("got signout request"),await a.navigate({url:n.url,state:(r=n.state)==null?void 0:r.id,scriptOrigin:this.settings.iframeScriptOrigin})}catch(t){throw e.debug("error after preparing navigator, closing navigator window"),a.close(),t}}async _signoutEnd(l){let a=this._logger.create("_signoutEnd"),r=await this._client.processSignoutResponse(l);return a.debug("got signout response"),r}async signoutSilent(l={}){var a;let r=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:e,...t}=l,i=this.settings.includeIdTokenInSilentSignout?(a=await this._loadUser())==null?void 0:a.id_token:void 0,n=this.settings.popup_post_logout_redirect_uri,s=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:e});await this._signout({request_type:"so:s",post_logout_redirect_uri:n,id_token_hint:i,...t},s),r.info("success")}async signoutSilentCallback(l=window.location.href){let a=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(l),a.info("success")}async revokeTokens(l){let a=await this._loadUser();await this._revokeInternal(a,l)}async _revokeInternal(l,a=this.settings.revokeTokenTypes){let r=this._logger.create("_revokeInternal");if(!l)return;let e=a.filter(t=>typeof l[t]=="string");if(!e.length){r.debug("no need to revoke due to no token(s)");return}for(let t of e)await this._client.revokeToken(l[t],t),r.info(`${t} revoked successfully`),t!=="access_token"&&(l[t]=null);await this.storeUser(l),r.debug("user stored"),await this._events.load(l)}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){let l=this._logger.create("_loadUser"),a=await this.settings.userStore.get(this._userStoreKey);return a?(l.debug("user storageString loaded"),xa.fromStorageString(a)):(l.debug("no user storageString"),null)}async storeUser(l){let a=this._logger.create("storeUser");if(l){a.debug("storing user");let r=l.toStorageString();await this.settings.userStore.set(this._userStoreKey,r)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey),this.settings.dpop&&await this.settings.dpop.store.remove(this.settings.client_id)}async clearStaleState(){await this._client.clearStaleState()}async dpopProof(l,a,r,e){var t,i;let n=await((i=(t=this.settings.dpop)==null?void 0:t.store)==null?void 0:i.get(this.settings.client_id));if(n)return await C.generateDPoPProof({url:l,accessToken:a?.access_token,httpMethod:r,keyPair:n.keys,nonce:e})}async generateDPoPJkt(l){let a=await l.store.get(this.settings.client_id);if(!a){let r=await C.generateDPoPKeys();a=new fl(r),await l.store.set(this.settings.client_id,a)}return await C.generateDPoPJkt(a.keys)}},Sr="3.3.0",Gr=Sr,Qr=class{constructor(){this._dbName="oidc",this._storeName="dpop"}async set(l,a){await(await this.createStore(this._dbName,this._storeName))("readwrite",e=>(e.put(a,l),this.promisifyRequest(e.transaction)))}async get(l){return await(await this.createStore(this._dbName,this._storeName))("readonly",r=>this.promisifyRequest(r.get(l)))}async remove(l){let a=await this.get(l);return await(await this.createStore(this._dbName,this._storeName))("readwrite",e=>this.promisifyRequest(e.delete(l))),a}async getAllKeys(){return await(await this.createStore(this._dbName,this._storeName))("readonly",a=>this.promisifyRequest(a.getAllKeys()))}promisifyRequest(l){return new Promise((a,r)=>{l.oncomplete=l.onsuccess=()=>a(l.result),l.onabort=l.onerror=()=>r(l.error)})}async createStore(l,a){let r=indexedDB.open(l);r.onupgradeneeded=()=>r.result.createObjectStore(a);let e=await this.promisifyRequest(r);return async(t,i)=>{let s=e.transaction(a,t).objectStore(a);return await i(s)}}};export{Yl as AccessTokenEvents,Gl as CheckSessionIFrame,G as Component,fl as DPoPState,J as ErrorResponse,Pa as ErrorTimeout,ea as Fragment,vl as InMemoryWebStorage,Qr as IndexedDbDPoPStore,na as Log,d as Logger,Ql as MetadataService,br as OidcClient,za as OidcClientSettingsStore,cr as SessionMonitor,wa as SigninResponse,gl as SigninState,sr as SignoutResponse,oa as State,xa as User,Yr as UserManager,dr as UserManagerSettingsStore,Gr as Version,hl as WebStorageStateStore,Er as cloneElement,Tr as createContext,ra as createElement,zr as createRef,ra as h,qr as html,Ml as hydrate,Ul as isValidElement,w as options,Ka as render,Al as toChildArray,$r as useCallback,Wr as useContext,Fr as useDebugValue,Hr as useEffect,Lr as useErrorBoundary,Jr as useId,Dr as useImperativeHandle,Wl as useLayoutEffect,il as useMemo,$l as useReducer,Mr as useRef,Dl as useState};
//# sourceMappingURL=deps.mjs.map
